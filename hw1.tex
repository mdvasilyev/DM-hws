%! suppress = Makeatletter
%! suppress = TooLargeSection
%! suppress = MissingLabel
\documentclass{article}

% Fields
\usepackage{geometry}
\geometry{top=25mm}
\geometry{bottom=35mm}
\geometry{left=20mm}
\geometry{right=20mm}
% ------------------------------------------------

% Graphics
\usepackage{color}
\usepackage{tabularx}
\usepackage{tikz}
\usepackage{blkarray}
\usepackage{graphicx}
% ------------------------------------------------

% Math
\usepackage{amsmath, amsfonts}
\usepackage{amssymb}
\usepackage{proof}
\usepackage{mathrsfs}
% Crossed-out symbols
% https://tex.stackexchange.com/questions/75525/how-to-write-crossed-out-math-in-latex
\usepackage[makeroom]{cancel}
\usepackage{mathtools}
% ------------------------------------------------

% Additional font sizes
% https://www.overleaf.com/learn/latex/Questions/How_do_I_adjust_the_font_size%3F
\usepackage{moresize}
% Additional colors
% https://www.overleaf.com/learn/latex/Using_colours_in_LaTeX
\usepackage{xcolor}
% \texttimes
\usepackage{textcomp}
% ------------------------------------------------

% Language
\usepackage[utf8] {inputenc}
\usepackage[T2A] {fontenc}
\usepackage[english, russian] {babel}
\usepackage{indentfirst, verbatim}
\usetikzlibrary{cd, babel}
% ------------------------------------------------

% Fonts
\usepackage{stmaryrd}
\usepackage{cmbright}
\usepackage{wasysym}
% ------------------------------------------------

% Code
% https://tex.stackexchange.com/questions/99475/how-to-invoke-latex-with-the-shell-escape-flag-in-texstudio-former-texmakerx
% Colored, requires --shell-escape compiling option
% \usepackage{minted}
% \setminted{xleftmargin=\parindent, autogobble, escapeinside=\#\#}
\usepackage{listings}
% ------------------------------------------------

% Custom envs
% https://tex.stackexchange.com/questions/371286/draw-a-horizontal-line-in-latex
\newenvironment{proof}{\subparagraph{\hspace{-1em}Решение:\newline}}{\par\noindent\rule{\textwidth}{0.4pt}}
% ------------------------------------------------

% Custom commands
\newcommand{\comb}[1]{\mathbf{#1}}
\newcommand{\step}{\rightsquigarrow}
\newcommand{\term}[1]{\mathbf{#1}}
\newcommand{\ap}{~}
\newcommand{\termdef}{\coloneqq}
\newcommand{\subst}[3]{\left[#2 \mapsto #3 \right] #1}
\newcommand{\eqbeta}{=_\beta}
\newcommand{\eqeta}{=_\eta}
% ------------------------------------------------

% Head
\usepackage{fancybox,fancyhdr}
\usepackage{hyperref}
\pagestyle{fancy}
\fancyhead[R]{Максим Васильев (285800)} % TODO введите ваше имя
\fancyhead[L]{ИТМО MSE, ДМ 2023, Дз 1}
% ------------------------------------------------

% Numbering
% https://tex.stackexchange.com/questions/80113/hide-section-numbers-but-keep-numbering
\makeatletter
\renewcommand\thesubsection{Блок \@arabic\c@subsection.\hspace{-0.8em}}
\renewcommand\thesubsubsection{Задание \@arabic\c@subsection.\@arabic\c@subsubsection\hspace{-0.8em}}
% https://tex.stackexchange.com/questions/327689/numbering-subsubsections-with-letters
\renewcommand\theparagraph{\alph{paragraph})\hspace{-0.8em}}
% https://tex.stackexchange.com/questions/129208/numbering-paragraphs-in-latex
\setcounter{secnumdepth}{4}
\makeatother
% ------------------------------------------------

\begin{document}

    \begin{enumerate}
        \item \textit{(1 балл)} Какое максимальное количество королей можно поместить на шахматную доску 8 x 8 так, чтобы эти короли не били друг друга?
        
        \textbf{Решение}:

        Король может ходить на любую соседнюю клетку, поэтому в квадрате размером 2 на 2 может находиться только один король, так как все клетки попарно соседние. Рассмотрим квадрат размером 4 на 4, который можно получить трансляцией квадрата 2 на 2 по осям $x$ и $y$. Квадрат 4 на 4 представляет собой 4 коробки, каждая из которых размером 2 на 2. Соответственно, в эти четыре коробки можно уместить лишь по одному королю. Добавить пятого короля в эти четыре коробки не получится, потому что по принципу Дирихле: хотя бы в одной коробке окажется два короля, а так быть не может, если мы хотим, чтобы они не били друг друга. Заметим, что трансляция позволяет гарантировать, что король никого побить не сможет, так как он фактически окружен слоем из пустых ячеек.

        Квадрат 8 на 8 можем получить трансляцией квадрата 4 на 4 по осям $x$ и $y$. Благодаря трансляции короли из соседних блоков размера 4 на 4 никак друг на друга не влияют, а для каждого квадрата 4 на 4 мы выяснили, что максимально допустимое количество королей -- это 4. Следовательно, на поле 8 x 8 максимально может находиться 16 королей так, чтобы эти короли не били друг друга.

        Вариант корректной расстановки королей на поле приведен на картинке ниже.

        \begin{center}
        \begin{tikzpicture}
            \draw[thick, ->] (0*0.5,0*0.5) -- (9*0.5,0*0.5) node[anchor=north west]{x};
            \draw[thick, ->] (0*0.5,0*0.5) -- (0*0.5,9*0.5) node[anchor=south east]{y};
            \draw[step=1*0.5cm] (0*0.5,0*0.5) grid (8*0.5,8*0.5);
            \filldraw[gray, draw=black] (0*0.5,0*0.5) rectangle (1*0.5,1*0.5);
            \filldraw[gray, draw=black] (2*0.5,0*0.5) rectangle (3*0.5,1*0.5);
            \filldraw[gray, draw=black] (4*0.5,0*0.5) rectangle (5*0.5,1*0.5);
            \filldraw[gray, draw=black] (6*0.5,0*0.5) rectangle (7*0.5,1*0.5);
            \filldraw[gray, draw=black] (0*0.5,2*0.5) rectangle (1*0.5,3*0.5);
            \filldraw[gray, draw=black] (2*0.5,2*0.5) rectangle (3*0.5,3*0.5);
            \filldraw[gray, draw=black] (4*0.5,2*0.5) rectangle (5*0.5,3*0.5);
            \filldraw[gray, draw=black] (6*0.5,2*0.5) rectangle (7*0.5,3*0.5);
            \filldraw[gray, draw=black] (0*0.5,4*0.5) rectangle (1*0.5,5*0.5);
            \filldraw[gray, draw=black] (2*0.5,4*0.5) rectangle (3*0.5,5*0.5);
            \filldraw[gray, draw=black] (4*0.5,4*0.5) rectangle (5*0.5,5*0.5);
            \filldraw[gray, draw=black] (6*0.5,4*0.5) rectangle (7*0.5,5*0.5);
            \filldraw[gray, draw=black] (0*0.5,6*0.5) rectangle (1*0.5,7*0.5);
            \filldraw[gray, draw=black] (2*0.5,6*0.5) rectangle (3*0.5,7*0.5);
            \filldraw[gray, draw=black] (4*0.5,6*0.5) rectangle (5*0.5,7*0.5);
            \filldraw[gray, draw=black] (6*0.5,6*0.5) rectangle (7*0.5,7*0.5);
        \end{tikzpicture}

        \textit{Рисунок 1 -- Расстановка королей}
        \end{center}

        \textbf{Ответ}:
        16 королей.
        \item \textit{(1 балл)} Узлы бесконечной клетчатой бумаги покрашены в два цвета. Докажите, что существуют две горизонтальные и две вертикальные прямые, на пересечениях которых лежат точки, покрашенные в один и тот же цвет.
        
        \textbf{Решение}:

        $\square$

        Имея двухцветную раскраску, можно взять 3 точки и гарантировать (по принципу Дирихле), что хотя бы две из них будут одинакового цвета. Так как раскрасить три последовательных точки можно 8 способами, то достаточно взять 9 параллельных линий, которые пересекаются тремя другими (перпендикулярно). В таком случае, по принципу Дирихле, среди девяти троек найдут две с одинаковой раскраской, а так как эти три точки покрашены в два цвета, то две из них покрашены в один и тот же цвет. Так можно всегда найти две горизонтальные и две вертикальные прямые, пересекающиеся в одноцветных точках.
        \begin{flushright}
            $\blacksquare$
        \end{flushright}

        \item \textit{(1,5 балла)} Докажите, что в любой выборке из 52 положительных целых чисел найдутся хотя бы два, у которых либо их сумма, либо их разность делится на 100.
        
        \textbf{Решение}:

        $\square$

        При делении на 100 можно получить сто остатков от деления: $0, 1, \ldots, 99$. Разобьем их на следующие множества в количестве 51:
        $$\{0\}, \{50\}, \{1, 99\}, \{2, 98\}, \{3, 97\}, \ldots \{49, 51\}.$$
        Имея 52 числа, по принципу Дирихле можно заключить, что в одно множество попадет хотя бы два числа из данных 52. Рассмотрим первое $\{0\}$ и второе $\{50\}$ множества: если какие-то два числа $n_1$ и $n_2$ попадают в одно из этих множеств, то, что их разность, что их сумма тоже будут делиться на 100. Если два числа попадут в любое из множеств $\{1, 99\}, \{2, 98\}, \{3, 97\}, \ldots \{49, 51\}$, то возможны несколько случаев: если два числа $n_1$ и $n_2$ будут иметь одинаковый (в рамках коробки) остаток от деления на 100, то их разность будет делиться на 100; если два числа $n_1$ и $n_2$ будут иметь разные (в рамках коробки) остатки от деления на 100, то их сумма будет делиться на 100, потому что коробки так устроены, что в сумме они дают как раз 100.
        \begin{flushright}
            $\blacksquare$
        \end{flushright}

        \item \textit{(1 балл)} (Неравенство Бернулли) Докажите, что $(1+a)^n\geq1+na$ для любого вещественного $a>-1$ и для любого натурального $n$.
        
        \textbf{Решение}:

        $\square$

        \textit{База индукции}:
        
        $n=1$: 

        $$(1+a)^1=1+1\cdot a.$$

        \textit{Индукционный переход}: $k\mapsto(k+1)$

        Предполагаем, что для $n=k$ неравенство верно. Рассмотрим $n=k+1$:
        \begin{equation}
            (1+a)^{n+1}=(1+a)^n(1+a)\geq(1+na)(1+a)=1+a+na+na^2=1+(n+1)a+na^2.
        \end{equation}
        Учитывая, что $n\geq1$ и $a^2\geq0$, можно сделать вывод, что $na^2\geq0$. Тогда
        \begin{equation}
            (1+a)^{n+1}\geq1+(n+1)a+na^2\geq1+(n+1)a.
        \end{equation}

        \begin{flushright}
            $\blacksquare$
        \end{flushright}

        \item \textit{(2 балла)} На какое максимальное число частей могут разрезать плоскость $n$ прямых?
        
        \textbf{Решение}:

        Посмотрим на несколько первых частных случаев, когда прямые пересекаются так, чтобы образовать максимальное количество частей:
        \begin{center}
        \begin{tikzpicture}
            \begin{scope}
                \node at (1,-0.25) {$n=1$};
                \draw (0,0) rectangle (2,2);
                \draw (1,0) -- (1,2);
            \end{scope}
            \begin{scope}[xshift=3cm]
                \node at (1,-0.25) {$n=2$};
                \draw (0,0) rectangle (2,2);
                \draw (1,0) -- (1,2);
                \draw (0.9,0) -- (1.1,2);
            \end{scope}
            \begin{scope}[xshift=6cm]
                \node at (1,-0.25) {$n=3$};
                \draw (0,0) rectangle (2,2);
                \draw (1,0) -- (1,2);
                \draw (0.9,0) -- (1.1,2);
                \draw (0.7,0) -- (1.6,2);
            \end{scope}
            \begin{scope}[xshift=9cm]
                \node at (1,-0.25) {$n=4$};
                \draw (0,0) rectangle (2,2);
                \draw (1,0) -- (1,2);
                \draw (0.9,0) -- (1.1,2);
                \draw (0.7,0) -- (1.6,2);
                \draw (0.5,0) -- (2,1.5);
            \end{scope}
        \end{tikzpicture}
        \end{center}

        Чтобы получать максимальное количество частей, на которые делится плоскость, нужно очередной прямой ($k$-ая по счету) пересекать $k-1$ прямую так, чтобы в каждой точке плоскости не пересекалось больше двух прямых. При таком подходе очередная $k$-ая прямая будет делить каждую из $k-1$ областей на две  и добавлять $k$ областей.

        Пусть $n(k)$ -- максимальное количество частей, на которые $k$ прямых делят плоскость. Тогда можно получить следующую закономерность:
        \begin{eqnarray}
            n\,(1) &=& 2, \\
            n\,(2) &=& 4, \\
            n\,(3) &=& 7, \\
            n\,(4) &=& 11.
        \end{eqnarray}

        Можно получить рекуррентную формулу:
        \begin{equation}\label{recurr}
            \begin{cases}
                n\,(k) = n\,(k-1)+k, \\
                n\,(1) = 2, \\
                k = 2, 3, \ldots
            \end{cases}
        \end{equation}

        Формулу (\ref{recurr}) можно привести к виду:
        \begin{eqnarray}
            n\,(k) &=& 2 + (2 + 3 + 4 + \ldots + k), \\
            n\,(k) &=& 2 + \frac{(2 + k)(k - 1)}{2} = \frac{2k-2+k^2-k+4}{2}=1+\frac{k(k+1)}{2}.
        \end{eqnarray}

        \textbf{Ответ}:
        $n\,(k) = 1 + \frac{k(k+1)}{2}$

    \end{enumerate}

\end{document}
