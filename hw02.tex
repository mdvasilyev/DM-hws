%! suppress = Makeatletter
%! suppress = TooLargeSection
%! suppress = MissingLabel
\documentclass{article}

% Fields
\usepackage{geometry}
\geometry{top=25mm}
\geometry{bottom=35mm}
\geometry{left=20mm}
\geometry{right=20mm}
% ------------------------------------------------

% Graphics
\usepackage{color}
\usepackage{tabularx}
\usepackage{tikz}
\usepackage{blkarray}
\usepackage{graphicx}
% ------------------------------------------------

% Math
\usepackage{amsmath, amsfonts}
\usepackage{amssymb}
\usepackage{proof}
\usepackage{mathrsfs}
% Crossed-out symbols
% https://tex.stackexchange.com/questions/75525/how-to-write-crossed-out-math-in-latex
\usepackage[makeroom]{cancel}
\usepackage{mathtools}
% ------------------------------------------------

% Additional font sizes
% https://www.overleaf.com/learn/latex/Questions/How_do_I_adjust_the_font_size%3F
\usepackage{moresize}
% Additional colors
% https://www.overleaf.com/learn/latex/Using_colours_in_LaTeX
\usepackage{xcolor}
% \texttimes
\usepackage{textcomp}
% ------------------------------------------------

% Language
\usepackage[utf8] {inputenc}
\usepackage[T2A] {fontenc}
\usepackage[english, russian] {babel}
\usepackage{indentfirst, verbatim}
\usetikzlibrary{cd, babel}
% ------------------------------------------------

% Fonts
\usepackage{stmaryrd}
\usepackage{cmbright}
\usepackage{wasysym}
% ------------------------------------------------

% Code
% https://tex.stackexchange.com/questions/99475/how-to-invoke-latex-with-the-shell-escape-flag-in-texstudio-former-texmakerx
% Colored, requires --shell-escape compiling option
% \usepackage{minted}
% \setminted{xleftmargin=\parindent, autogobble, escapeinside=\#\#}
\usepackage{listings}
% ------------------------------------------------

% Custom envs
% https://tex.stackexchange.com/questions/371286/draw-a-horizontal-line-in-latex
\newenvironment{proof}{\subparagraph{\hspace{-1em}Решение:\newline}}{\par\noindent\rule{\textwidth}{0.4pt}}
% ------------------------------------------------

% Custom commands
\newcommand{\comb}[1]{\mathbf{#1}}
\newcommand{\step}{\rightsquigarrow}
\newcommand{\term}[1]{\mathbf{#1}}
\newcommand{\ap}{~}
\newcommand{\termdef}{\coloneqq}
\newcommand{\subst}[3]{\left[#2 \mapsto #3 \right] #1}
\newcommand{\eqbeta}{=_\beta}
\newcommand{\eqeta}{=_\eta}
% ------------------------------------------------

% Head
\usepackage{fancybox,fancyhdr}
\usepackage{hyperref}
\pagestyle{fancy}
\fancyhead[R]{Максим Васильев (285800)} % TODO введите ваше имя
\fancyhead[L]{ИТМО MSE, ДМ 2023, Дз 2}
% ------------------------------------------------

% Numbering
% https://tex.stackexchange.com/questions/80113/hide-section-numbers-but-keep-numbering
\makeatletter
\renewcommand\thesubsection{Блок \@arabic\c@subsection.\hspace{-0.8em}}
\renewcommand\thesubsubsection{Задание \@arabic\c@subsection.\@arabic\c@subsubsection\hspace{-0.8em}}
% https://tex.stackexchange.com/questions/327689/numbering-subsubsections-with-letters
\renewcommand\theparagraph{\alph{paragraph})\hspace{-0.8em}}
% https://tex.stackexchange.com/questions/129208/numbering-paragraphs-in-latex
\setcounter{secnumdepth}{4}
\makeatother
% ------------------------------------------------

\begin{document}

    \begin{enumerate}
        \item \textit{(1 балл)} В алфавите племени Дюжина ровно 12 букв. Словом в этом языке является любая последовательность не более чем из 6 букв, в которой любые две соседние буквы различны. Сколько слов в языке племени?
        
        \textbf{Решение}:

        Если $A$ -- алфавит племени Дюжина, то по условию задачи
        \begin{equation}
            |A| = 12.            
        \end{equation}
        Слов из одной буквы (любая буква из 12):
        \begin{equation}
            12.
        \end{equation}
        Слов из двух букв (первая -- любая из 12, а вторая -- любая, но не первая):
        \begin{equation}
            12\cdot 11.
        \end{equation}
        Слов из трех букв (первая -- любая, вторая -- любая, но не первая, третья -- любая, но не вторая):
        \begin{equation}
            12\cdot 11\cdot 11.
        \end{equation}
        Остальные варианты по аналогии. Слов из четырех букв:
        \begin{equation}
            12\cdot 11\cdot 11\cdot 11.
        \end{equation}
        Слов из пяти букв:
        \begin{equation}
            12\cdot 11\cdot 11\cdot 11\cdot 11.
        \end{equation}
        Слов из шести букв:
        \begin{equation}
            12\cdot 11\cdot 11\cdot 11\cdot 11\cdot 11.
        \end{equation}
        Всего слов в племени Дюжина:
        \begin{equation}
            12 \cdot (1 + 11 + 11^2 + 11^3 + 11^4 + 11^5)
        \end{equation}

        \textbf{Ответ}:
        $12 \cdot (1 + 11 + 11^2 + 11^3 + 11^4 + 11^5)$


        \item \textit{(1 балл)} Шесть друзей купили абонементы в фитнес-клуб. В их абонементы входит возможность посещения групповых занятий по плаванию, боксу, йоге и кроссфиту (можно записаться хоть во все четыре группы). Каким количеством способов друзья могут выбрать себе занятия, если известно, что каждый из них записался хотя бы в одну группу?.
        
        \textbf{Решение}:

        Рассмотрим одного друга. Он имеет в распоряжении 4 секции. Если он может выбирать любое их количество, то вариантов выбрать одну из четырех, \ldots, четыре из четырех будет в сумме:
        \begin{equation}
            \binom{4}{1} + \binom{4}{2} + \binom{4}{3} + \binom{4}{4} = 15.
        \end{equation}
        Тогда количество способов, которыми шесть друзей могут выбрать себе занятия, будет равно $15^{6}$.

        \textbf{Ответ}:
        $15^{6}$

        \item \textit{(1,5 балл)} Сколькими способами можно поставить на шахматную доску так, чтобы они не били друг друга, двух белых ферзей?

        \textbf{Решение}:

        При любом положении ферзя на доске, он будет вычеркивать одну строчку и один столбец (14 клеток + 1 (та, где он сам и стоит)), но число вычеркиваемых клеток по диагонали меняется в зависимости от положения, поэтому рассмотрим случаи:
        \begin{itemize}
            \item Ферзь стоит на любой из четырех границ доски (28 положений) и вычеркивает 7 клеток по диагонали
            \begin{equation}
                28\cdot(64-(15+7))=28\cdot42
            \end{equation}
            \item Ферзь стоит на любой из четырех границ внутреннего поля доски 6 на 6 (20 положений) и вычеркивает 9 клеток по диагонали
            \begin{equation}
                20\cdot(64-(15+9))=20\cdot40
            \end{equation}
            \item Ферзь стоит на любой из четырех границ внутренного поля доски 4 на 4 (12 положений) и вычеркивает 11 клеток по диагонали
            \begin{equation}
                12\cdot(64-(15+11))=12\cdot38
            \end{equation}
            \item Ферзь стоит на любой из четырех границ внутренного поля доски 2 на 2 (4 положения) и вычеркивает 13 клеток по диагонали
            \begin{equation}
                4\cdot(64-(15+13))=4\cdot36
            \end{equation}
        \end{itemize}
        Учтем, что ферзи одного цвета, поэтому все варианты мы посчитали дважды.

        \textbf{Ответ}:
        $0.5\cdot(28\cdot42+20\cdot40+12\cdot38+4\cdot36)$

        \item \textit{(1,5 балла)} Вася нарисовал таблицу 7 × 7 и хочет поставить в нее 11 крестиков так, чтобы получилась центрально-симметричная конфигурация. Сколькими способами Вася может это сделать?
        
        \textbf{Решение}:

        Нарисуем таблицу 7 × 7 и заметим вот что. Если выделить область, которая на Рисунке 1 изображена красным, то, расположив в ней крестики, можно однозначно центрально-симметрично расположить такое же количество крестиков в зеленой области.
        \begin{center}
            \begin{tikzpicture}
                \draw[step=1*0.5cm] (0*0.5,0*0.5) grid (7*0.5,7*0.5);
                \draw[red, thick] (0,0) -- (4*0.5,0);
                \draw[red, thick] (4*0.5,0) -- (4*0.5,3*0.5);
                \draw[red, thick] (4*0.5,3*0.5) -- (3*0.5,3*0.5);
                \draw[red, thick] (3*0.5,3*0.5) -- (3*0.5,7*0.5);
                \draw[red, thick] (3*0.5,7*0.5) -- (0*0.5,7*0.5);
                \draw[red, thick] (0*0.5,7*0.5) -- (0*0.5,0*0.5);
                \draw[green, thick] (4*0.5,0) -- (7*0.5,0*0.5);
                \draw[green, thick] (7*0.5,0*0.5) -- (7*0.5,7*0.5);
                \draw[green, thick] (7*0.5,7*0.5) -- (3*0.5,7*0.5);
                \draw[green, thick, dashed] (3*0.5,7*0.5) -- (3*0.5,4*0.5);
                \draw[green, thick] (3*0.5,4*0.5) -- (4*0.5,4*0.5);
                \draw[green, thick] (4*0.5,4*0.5) -- (4*0.5,3*0.5);
                \draw[green, thick, dashed] (4*0.5,3*0.5) -- (4*0.5,0*0.5);
                \filldraw[gray] (3*0.5+0.02,3*0.5+0.02) rectangle (4*0.5-0.02,4*0.5-0.02);
            \end{tikzpicture}
    
            \textit{Рисунок 1 -- Таблица для расположения крестиков}
        \end{center}
        Поймем, что в красной области может быть только 5 крестиков. Если бы их было больше, то после центрально-симметричного отображения получилось бы, что было задействовано хотя бы 12 крестиков, а по условию, у нас их всего 11. Если бы их было меньше, то, после центрально-симметричного отображения, у нас осталось бы хотя бы 3 крестика, но их некуда поставить, так как свободна лишь одна единственная клетка в самом центре (закрашена серым цветом). Получается, что мы можем как угодно расположить в красной области 5 крестиков, зеленую область мы можем единственным способом заполнить для выполнения условия задачи (центральная симметрия), и еще последний крестик поставить в центр. Таким образом, задача свелась к тому, что узнать число способов разместить 5 неразличимых крестиков на поле площадью 24, то есть:
        \begin{equation}
            \binom{24}{5}
        \end{equation}

        \textbf{Ответ}:
        $\binom{24}{5}$

        \item \textit{(2 балла)} Вася вновь нарисовал таблицу, только теперь размера 4 × 4, и хочет заполнить ее цифрами 1, 2, 3 и 4 так, чтобы в каждой строчке и в каждом столбце никакая цифра не повторялась. Сколькими способами Вася может это сделать?
        
        \textbf{Решение}:

        Рассмотрим первую строчку в таблице 4 x 4. Нам на 4 позициях нужно разместить 4 элемента (1, 2, 3, 4) без повторений. Всего способов так сделать:
        \begin{equation}
            4! = 24.
        \end{equation}
        Рассмотрим первый столбец. С учетом верхнего элемента у нас есть
        \begin{equation}
            3! = 6
        \end{equation}
        вариантов расстановки чисел. Осталось рассмотреть уменьшенную задачу: рассмотреть квадрат размера 3 х 3. При этом зафиксируем числа в верхней строке (1, 2, 3, 4) и левом столбце (1, 2, 3, 4), а потом просто домножим на $3! \cdot 4!$ Здесь возможны три случая:
        \begin{itemize}
            \item верхний левый элемент квадрата 3 x 3 равен 1. Тогда первая строчка такого квадрата обязана быть (1, 4, 3); первый столбец должен быть (1, 4, 3); на оставшийся квадратик 2 x 2 остается два варианта:
            \begin{equation}
                \begin{pmatrix}
                    1, 2 \\
                    2, 1
                \end{pmatrix}, \quad
                \begin{pmatrix}
                    2, 1 \\
                    1, 2
                \end{pmatrix}.
            \end{equation}
            Поэтому на такой случай остается 2 варианта корректного исхода.
            \item верхний левый элемент квадрата 3 x 3 равен 3. Тогда может быть только один вариант:
            \begin{equation}
                \begin{pmatrix}
                    3, 4, 1 \\
                    4, 1, 2 \\
                    1, 2, 3
                \end{pmatrix}.
            \end{equation}
            \item верхний левый элемент квадрата 3 x 3 равен 4. Тогда может быть только один вариант:
            \begin{equation}
                \begin{pmatrix}
                    4, 1, 3 \\
                    1, 3, 2 \\
                    3, 2, 1
                \end{pmatrix}.
            \end{equation}
        \end{itemize}
        В итоге на квадрат 3 x 3 остается $(2 + 1 + 1)$ вариантов. Теперь вспоминаем про то, что мы не должны были фиксировать первую строчку и первый столбец в квадрате 4 x 4, поэтому учтем все случаи:
        \begin{equation}
            3! \cdot 4! \cdot (2 + 1 + 1) = 576.
        \end{equation}

        \textbf{Ответ}:
        $576$

    \end{enumerate}

\end{document}
